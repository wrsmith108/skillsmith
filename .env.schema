# Skillsmith Environment Schema
# @defaultSensitive=true @defaultRequired=infer
#
# This schema defines environment variables for varlock validation.
# Run `varlock load` to validate - secrets will be masked.
# NEVER use `cat .env` or `echo $VAR` - those expose secrets to Claude's context.

# =============================================================================
# GIT-CRYPT KEY
# =============================================================================

# Path to git-crypt symmetric key file for decrypting docs/
# Each user sets their own local path in .env
# @type=string @required @sensitive
GIT_CRYPT_KEY_PATH=

# =============================================================================
# LINEAR INTEGRATION
# =============================================================================

# Linear API Key - Required for Linear skill operations
# Get from: Linear → Settings → Security & access → Personal API keys
# @type=string(startsWith=lin_api_) @required @sensitive
LINEAR_API_KEY=

# Linear Team ID - Optional, for E2E test issue creation
# Get from: Linear → Settings → Workspace → Copy team ID (UUID format)
# @type=string(pattern=^[0-9a-f-]{36}$) @sensitive @required=false
LINEAR_TEAM_ID=

# Linear Project IDs - Used by Linear integration scripts
# Get from: Linear → Project → Settings → Copy project ID
# @type=string(pattern=^[0-9a-f-]{36}$) @sensitive
LINEAR_PROJECT_PHASE1=
LINEAR_PROJECT_PHASE2=
LINEAR_PROJECT_TEAM=

# =============================================================================
# OPTIONAL: Additional API Keys (add as needed)
# =============================================================================

# GitHub Token - For repository operations (PAT - 5K req/hr)
# @type=string(startsWith=gh) @sensitive
# GITHUB_TOKEN=

# =============================================================================
# GITHUB APP - For high-rate skill discovery (15K req/hr)
# Created: January 4, 2026
# App: skillsmith-indexer
# =============================================================================

# GitHub App ID - Found on App settings page
# @type=string @required @sensitive
GITHUB_APP_ID=

# Installation ID - From URL after installing: github.com/settings/installations/XXXXX
# @type=string @required @sensitive
GITHUB_APP_INSTALLATION_ID=

# Base64-encoded .pem private key
# Generate with: cat key.pem | base64 -w 0
# @type=string @required @sensitive
GITHUB_APP_PRIVATE_KEY=

# =============================================================================
# GITHUB OAUTH (SMI-1715 - Website Login)
# =============================================================================

# GitHub OAuth App Client ID
# Create at: GitHub → Settings → Developer settings → OAuth Apps
# @type=string @required @sensitive
GITHUB_CLIENT_ID=

# GitHub OAuth App Client Secret
# @type=string @required @sensitive
GITHUB_CLIENT_SECRET=

# NPM Publish Token - Fine-grained token for @skillsmith packages
# Created: January 4, 2026 | Expires: April 4, 2026 (90 days)
# Get from: npmjs.com → Access Tokens → Generate New Token → Granular Access Token
# Scope: @skillsmith organization (read and write)
# @type=string(startsWith=npm_) @sensitive @required=false
NPM_TOKEN=

# Anthropic API Key - For Claude API calls
# @type=string(startsWith=sk-ant-) @sensitive
# ANTHROPIC_API_KEY=

# =============================================================================
# GOOGLE GEMINI (Logo Generation)
# =============================================================================

# Gemini API Key - For AI image generation via Gemini CLI
# Get from: https://aistudio.google.com/app/apikey
# @type=string(startsWith=AIza) @required=false @sensitive
GEMINI_API_KEY=

# =============================================================================
# NON-SENSITIVE CONFIGURATION
# =============================================================================

# Node environment
# @type=enum(development,staging,production) @sensitive=false
NODE_ENV=development

# =============================================================================
# E2E TEST CONFIGURATION
# =============================================================================

# Test repository URL base for E2E tests
# Used to construct mock repository URLs in seed data
# @type=string @sensitive=false
# TEST_REPO_URL_BASE=https://github.com/skillsmith-community

# =============================================================================
# HIVE MIND ORCHESTRATOR (non-sensitive, have defaults in config.ts)
# =============================================================================

# Override skillsmith path (defaults to cwd)
# @type=string @sensitive=false
# SKILLSMITH_PATH=

# Memory namespace for orchestrator state
# @type=string @sensitive=false
# PHASE4_NAMESPACE=phase4-orchestrator

# Max agents per epic (default: 6)
# @type=number(min=1,max=20) @sensitive=false
# MAX_AGENTS_PER_EPIC=6

# Session timeout in ms (default: 1800000 = 30min)
# @type=number @sensitive=false
# SESSION_TIMEOUT=1800000

# =============================================================================
# VERCEL DEPLOYMENT
# =============================================================================

# Vercel Token - For CLI authentication and deployment
# Get from: Vercel Dashboard → Settings → Tokens → Create Token
# @type=string @required @sensitive
VERCEL_TOKEN=

# Vercel Org ID - Organization identifier (optional)
# Get from: Vercel Dashboard → Settings → General → Team ID
# @type=string @sensitive=false @required=false
VERCEL_ORG_ID=

# Vercel Project ID - Project identifier (optional, set after project creation)
# Get from: Vercel Dashboard → Project → Settings → General → Project ID
# @type=string @sensitive=false @required=false
VERCEL_PROJECT_ID=

# =============================================================================
# STRIPE PAYMENT INTEGRATION
# =============================================================================

# Stripe API Key - For Claude to manage products, prices, and subscriptions
# Get from: Stripe Dashboard → Developers → API keys → Secret key (or Restricted key)
# Use test key (sk_test_) for development, live key (sk_live_ or rk_live_) for production
# @type=string @required @sensitive
STRIPE_API_KEY=

# Stripe Secret Key - For server-side API calls (optional until payments enabled)
# Get from: Stripe Dashboard → Developers → API keys → Secret key
# Use test key (sk_test_) for development, live key (sk_live_) for production
# @type=string(startsWith=sk_) @required=false @sensitive
STRIPE_SECRET_KEY=

# Stripe Publishable Key - For client-side (Stripe.js) (optional until payments enabled)
# Get from: Stripe Dashboard → Developers → API keys → Publishable key
# @type=string(startsWith=pk_) @sensitive=false @required=false
STRIPE_PUBLISHABLE_KEY=

# Stripe Webhook Secret - For verifying webhook signatures (optional until payments enabled)
# Get from: Stripe Dashboard → Developers → Webhooks → Signing secret
# @type=string(startsWith=whsec_) @required=false @sensitive
STRIPE_WEBHOOK_SECRET=

# Stripe Restricted Key - Live mode restricted key with limited permissions
# Get from: Stripe Dashboard → Developers → API keys → Create restricted key
# Permissions: Checkout Sessions (Write), Customers (Write), Subscriptions (Write)
# @type=string(startsWith=rk_live_) @required=false @sensitive
SKILLSMITH_STRIPE_RESTRICTED_KEY=

# Stripe Test Restricted Key - Test mode restricted key for development
# Get from: Stripe Dashboard (Test mode) → Developers → API keys → Create restricted key
# @type=string(startsWith=rk_test_) @required=false @sensitive
SKILLSMITH_STRIPE_TEST_RESTRICTED_KEY=

# Stripe Test Secret Key - Test mode secret key for development
# Get from: Stripe Dashboard (Test mode) → Developers → API keys → Secret key
# @type=string(startsWith=sk_test_) @required=false @sensitive
STRIPE_TEST_SECRET_KEY=

# Stripe Test Publishable Key - Test mode publishable key for client-side
# Get from: Stripe Dashboard (Test mode) → Developers → API keys → Publishable key
# @type=string(startsWith=pk_test_) @sensitive=false @required=false
STRIPE_TEST_PUBLISHABLE_KEY=

# Stripe Price IDs - Product pricing identifiers
# Create products in Stripe Dashboard → Products, then copy price IDs
# @type=string(startsWith=price_) @sensitive=false
STRIPE_PRICE_INDIVIDUAL_MONTHLY=price_individual_monthly
STRIPE_PRICE_INDIVIDUAL_ANNUAL=price_individual_annual
STRIPE_PRICE_TEAM_MONTHLY=price_team_monthly
STRIPE_PRICE_TEAM_ANNUAL=price_team_annual
STRIPE_PRICE_ENTERPRISE_MONTHLY=price_enterprise_monthly
STRIPE_PRICE_ENTERPRISE_ANNUAL=price_enterprise_annual

# =============================================================================
# WEBSITE CONFIGURATION
# =============================================================================

# Public application URL - Used for Stripe success/cancel redirects
# @type=string @sensitive=false
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# SUPABASE SKILL REGISTRY (Phase 6A)
# =============================================================================

# Supabase Access Token - For CLI authentication and project management
# Get from: Supabase Dashboard → Account → Access Tokens → Generate New Token
# This token allows Claude to create projects, deploy functions, and manage infrastructure
# @type=string(startsWith=sbp_) @required @sensitive
SUPABASE_ACCESS_TOKEN=

# Supabase Project Reference - Auto-populated after project creation
# Format: 20-character alphanumeric ID (e.g., "abcdefghijklmnopqrst")
# @type=string @sensitive=false
SUPABASE_PROJECT_REF=

# Supabase Project URL - Auto-populated after project creation
# Format: https://<project-ref>.supabase.co
# @type=string(startsWith=https://) @sensitive=false
SUPABASE_URL=

# Supabase Anonymous/Public Key - Safe for client-side, respects RLS
# Auto-retrieved via: supabase projects api-keys --project-ref $SUPABASE_PROJECT_REF
# @type=string(startsWith=eyJ) @sensitive=false
SUPABASE_ANON_KEY=

# Supabase Service Role Key - BYPASSES RLS, server-side only!
# Auto-retrieved via: supabase projects api-keys --project-ref $SUPABASE_PROJECT_REF
# @type=string(startsWith=eyJ) @required @sensitive
SUPABASE_SERVICE_ROLE_KEY=

# Supabase Database Password - Required for direct DB connection
# Set during project creation or retrieved from dashboard
# @type=string @required @sensitive
SUPABASE_DB_PASSWORD=

# =============================================================================
# POSTHOG TELEMETRY (Phase 6A)
# =============================================================================

# PostHog Project API Key
# Get from: PostHog → Project Settings → Project API Key
# @type=string(startsWith=phc_) @required @sensitive
POSTHOG_KEY=

# PostHog Host (usually https://app.posthog.com)
# @type=string(startsWith=https://) @sensitive=false
POSTHOG_HOST=https://app.posthog.com

# =============================================================================
# LICENSE KEY SIGNING (Phase 6 - Billing)
# =============================================================================

# RSA Private Key for signing license keys (Base64-encoded PEM)
# Generate with: npx tsx packages/enterprise/scripts/generate-keypair.ts
# Store the private key here, distribute public key to clients
# @type=string @required=false @sensitive
LICENSE_PRIVATE_KEY=

# RSA Public Key for validating license keys (Base64-encoded PEM)
# Distributed to clients for license validation
# @type=string @sensitive=false @required=false
LICENSE_PUBLIC_KEY=

# =============================================================================
# RESEND EMAIL SERVICE
# =============================================================================

# Resend API Key - For sending contact form email notifications
# Get from: Resend Dashboard → API Keys → Create API Key
# @type=string(startsWith=re_) @required @sensitive
RESEND_API_KEY=

# Resend Webhook Secret - For verifying inbound email webhooks
# Get from: Resend Dashboard → Webhooks → Select webhook → Signing secret
# @type=string(startsWith=whsec_) @required @sensitive
RESEND_WEBHOOK_SECRET=

# =============================================================================
# API KEY ENCRYPTION (SMI-52)
# =============================================================================

# Encryption key for pending API key display (32+ chars recommended)
# Used by pgcrypto to encrypt API keys stored temporarily after signup
# Set in Supabase: ALTER DATABASE postgres SET app.pending_key_secret = 'your-secret';
# @type=string @required=false @sensitive
PENDING_KEY_SECRET=

# =============================================================================
# SKILLSMITH FEATURE FLAGS
# =============================================================================

# Enable/disable anonymous telemetry
# @type=enum(true,false) @sensitive=false
SKILLSMITH_TELEMETRY=true

# Force offline mode (use local database instead of API)
# @type=enum(true,false) @sensitive=false
SKILLSMITH_OFFLINE_MODE=false

# Enable logarithmic quality score formula (experimental, pending user testing)
# When true: uses log10 scaling for better distribution across star ranges
# When false (default): uses linear scaling (saturates at 500 stars)
# @type=enum(true,false) @sensitive=false
SKILLSMITH_LOG_QUALITY_SCORE=false

# Override API URL (defaults to https://api.skillsmith.app/functions/v1)
# @type=string(startsWith=https://) @sensitive=false
# SKILLSMITH_API_URL=
