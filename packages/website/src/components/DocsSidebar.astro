---
interface Props {
  currentPath?: string;
}

const { currentPath = '' } = Astro.props;

const navItems = [
  { href: '/docs', label: 'Overview', icon: 'book' },
  { href: '/docs/getting-started', label: 'Getting Started', icon: 'rocket' },
  { href: '/docs/cli', label: 'CLI Reference', icon: 'terminal' },
  { href: '/docs/mcp-server', label: 'MCP Server', icon: 'server' },
  { href: '/docs/api', label: 'API Reference', icon: 'code' },
];

function isActive(href: string): boolean {
  if (href === '/docs') {
    return currentPath === '/docs' || currentPath === '/docs/';
  }
  return currentPath.startsWith(href);
}
---

<aside class="w-64 shrink-0 border-r border-dark-800 bg-dark-900/50">
  <nav class="sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto p-6" aria-label="Documentation navigation">
    <div class="mb-8">
      <h3 class="text-xs font-semibold uppercase tracking-wider text-dark-500 mb-3 px-3">Documentation</h3>
      <ul class="space-y-1">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class:list={[
                'flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors',
                isActive(item.href)
                  ? 'bg-primary-500/10 text-primary-400'
                  : 'text-dark-300 hover:bg-dark-800 hover:text-white'
              ]}
              aria-current={isActive(item.href) ? 'page' : undefined}
            >
              <span class="nav-icon" data-icon={item.icon}></span>
              <span>{item.label}</span>
            </a>
          </li>
        ))}
      </ul>
    </div>

    <div>
      <h3 class="text-xs font-semibold uppercase tracking-wider text-dark-500 mb-3 px-3">Resources</h3>
      <ul class="space-y-1">
        <li>
          <a
            href="https://github.com/Smith-Horn-Group/skillsmith"
            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-dark-300 hover:bg-dark-800 hover:text-white transition-colors"
            target="_blank"
            rel="noopener"
          >
            <span class="nav-icon" data-icon="github"></span>
            <span>GitHub</span>
            <svg class="w-3 h-3 ml-auto opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
            </svg>
          </a>
        </li>
        <li>
          <a
            href="https://www.npmjs.com/package/@skillsmith/cli"
            class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium text-dark-300 hover:bg-dark-800 hover:text-white transition-colors"
            target="_blank"
            rel="noopener"
          >
            <span class="nav-icon" data-icon="package"></span>
            <span>npm</span>
            <svg class="w-3 h-3 ml-auto opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
            </svg>
          </a>
        </li>
      </ul>
    </div>
  </nav>
</aside>

<style>
  .nav-icon {
    width: 1.125rem;
    height: 1.125rem;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.7;
  }

  .nav-icon::before {
    content: '';
    width: 1rem;
    height: 1rem;
    background: currentColor;
    mask-size: contain;
    mask-repeat: no-repeat;
    mask-position: center;
  }

  .nav-icon[data-icon="book"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M4 19.5A2.5 2.5 0 0 1 6.5 17H20'/%3E%3Cpath d='M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z'/%3E%3C/svg%3E");
  }

  .nav-icon[data-icon="rocket"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z'/%3E%3Cpath d='M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z'/%3E%3Cpath d='M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0'/%3E%3Cpath d='M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5'/%3E%3C/svg%3E");
  }

  .nav-icon[data-icon="terminal"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpolyline points='4 17 10 11 4 5'/%3E%3Cline x1='12' y1='19' x2='20' y2='19'/%3E%3C/svg%3E");
  }

  .nav-icon[data-icon="server"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Crect x='2' y='2' width='20' height='8' rx='2' ry='2'/%3E%3Crect x='2' y='14' width='20' height='8' rx='2' ry='2'/%3E%3Cline x1='6' y1='6' x2='6.01' y2='6'/%3E%3Cline x1='6' y1='18' x2='6.01' y2='18'/%3E%3C/svg%3E");
  }

  .nav-icon[data-icon="code"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpolyline points='16 18 22 12 16 6'/%3E%3Cpolyline points='8 6 2 12 8 18'/%3E%3C/svg%3E");
  }

  .nav-icon[data-icon="github"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='currentColor'%3E%3Cpath d='M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z'/%3E%3C/svg%3E");
  }

  .nav-icon[data-icon="package"]::before {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'%3E%3Cpath d='M16.5 9.4l-9-5.19'/%3E%3Cpath d='M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z'/%3E%3Cpolyline points='3.27 6.96 12 12.01 20.73 6.96'/%3E%3Cline x1='12' y1='22.08' x2='12' y2='12'/%3E%3C/svg%3E");
  }

  @media (max-width: 1024px) {
    aside {
      display: none;
    }
  }
</style>
